<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="exporter-version" content="Evernote Mac 7.5 (457109)"/><meta name="altitude" content="11.29557323455811"/><meta name="author" content="Nhan Cao"/><meta name="created" content="2018-12-27 02:03:14 +0000"/><meta name="latitude" content="10.7992214175969"/><meta name="longitude" content="106.6431847560734"/><meta name="source" content="desktop.mac"/><meta name="updated" content="2018-12-27 12:00:37 +0000"/><meta name="reminder-order" content="2018-12-27 04:27:30 +0000"/><title>BeeSightSoft: Ubuntu local setup copy</title></head><body><div># Install Git</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div>sudo apt install git</div><div>git config --global user.name "Nhan Cao"</div><div>git config --global user.email nhancv92@gmail.com</div></div><div><br/></div><div># Install Python</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div>sudo apt-get install python-pip python-dev python-virtualenv</div><div>sudo apt-get install python3-pip python3-dev</div></div><div><br/></div><div># Config bash_aliases</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div>touch ~/.bash_aliases</div><div>nano ~/.bash_aliases</div><div><br/></div><div># source</div><div>alias file.bash="nano ~/.bash_aliases"</div><div>alias bash.up="source ~/.bash_aliases"</div><div><br/></div><div>export ML3_ROOT="~/Workspace/python/ml3"</div><div>alias ml3.setup="virtualenv --system-site-packages -p python3 $ML3_ROOT &amp;&amp; ml3.$</div><div>alias ml3.destroy="rm -rf $ML3_ROOT"</div><div>alias ml3.active="source $ML3_ROOT/bin/activate"</div><div><br/></div><div># update bash for first time</div><div>source ~/.bash_aliases</div><div><br/></div></div><div><br/></div><div># Setup env</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div>ml3.setup</div></div><div><br/></div><div># Setup GPU env</div><ol><li><div>Check graphic card</div></li></ol><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div>sudo lshw -C display | grep product</div></div><div><br/></div><ol start="2"><li><div>Installing Nvidia Drivers</div></li></ol><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div>sudo add-apt-repository ppa:graphics-drivers/ppa</div><div>sudo apt install nvidia-driver-390</div><div><br/></div><div># Restart </div><div>sudo reboot now</div><div><br/></div><div># verify</div><div>nvidia-smi</div><div><br/></div><div>==&gt; </div><div>nhancao@iNhans-Ubuntu:~$ nvidia-smi</div><div>Thu Dec 27 14:00:26 2018</div><div>+-----------------------------------------------------------------------------+</div><div>| NVIDIA-SMI 390.87                 Driver Version: 390.87                    |</div><div>|-------------------------------+----------------------+----------------------+</div><div>| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |</div><div>| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |</div><div>|===============================+======================+======================|</div><div>|   0  Quadro K2000        Off  | 00000000:01:00.0  On |                  N/A |</div><div>| 30%   42C    P0    N/A /  N/A |     87MiB /  1996MiB |      0%      Default |</div><div>+-------------------------------+----------------------+----------------------+</div><div><br/></div><div>+-----------------------------------------------------------------------------+</div><div>| Processes:                                                       GPU Memory |</div><div>|  GPU       PID   Type   Process name                             Usage      |</div><div>|=============================================================================|</div><div>|    0      1056      G   /usr/lib/xorg/Xorg                            32MiB |</div><div>|    0      1091      G   /usr/bin/gnome-shell                          52MiB |</div><div>+-----------------------------------------------------------------------------+</div></div><div><br/></div><ol start="3"><li><div>Installing CUDA 9.0</div></li></ol><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div><span style="font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;"># Download at </span><a href="https://developer.nvidia.com/cuda-90-download-archive?target_os=Linux&amp;target_arch=x86_64&amp;target_distro=Ubuntu&amp;target_version=1704&amp;target_type=deblocal">https://developer.nvidia.com/cuda-90-download-archive?target_os=Linux&amp;target_arch=x86_64&amp;target_distro=Ubuntu&amp;target_version=1704&amp;target_type=deblocal</a></div><div><br/></div><div><span style="font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;">wget -O </span>cuda-repo-ubuntu1704-9-0-local_9.0.176-1_amd64.deb<span style="font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;"> </span><a href="https://developer.nvidia.com/compute/cuda/9.0/Prod/local_installers/cuda-repo-ubuntu1704-9-0-local_9.0.176-1_amd64-deb">https://developer.nvidia.com/compute/cuda/9.0/Prod/local_installers/cuda-repo-ubuntu1704-9-0-local_9.0.176-1_amd64-deb</a></div><div><br/></div><div># Install</div><div>sudo dpkg -i cuda-repo-ubuntu1704-9-0-local_9.0.176-1_amd64.deb</div><div>sudo apt-key add /var/cuda-repo-9-0-local/7fa2af80.pub</div><div>sudo apt-get update</div><div>sudo apt-get install cuda</div></div><div><br/></div><div>Update bash</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div>file.bash</div><div><br/></div><div>——</div><div># Put content below</div><div>export PATH=/usr/local/cuda-9.0/bin${PATH:+:${PATH}}</div><div>export LD_LIBRARY_PATH=/usr/local/cuda-9.0/lib64${LD_LIBRARY_PATH:+:${LD_LIBRARY_PATH}}</div><div>export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/local/cuda/extras/CUPTI/lib64</div><div><br/></div><div>Ctrl+X -&gt; Save (Y)</div><div>———</div><div><br/></div><div>bash.up</div></div><div><br/></div><ol start="4"><li><div>Verify cuda installation</div></li></ol><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div>cat /proc/driver/nvidia/version</div><div>==&gt; NVRM version: NVIDIA UNIX x86_64 Kernel Module  390.87  Tue Aug 21 12:33:05 PDT 2018</div><div>GCC version:  gcc version 7.3.0 (Ubuntu 7.3.0-27ubuntu1~18.04)</div><div><br/></div><div>nvcc --version</div><div><br/></div><div><span style="font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;">==&gt; </span>nvcc: NVIDIA (R) Cuda compiler driver</div><div>Copyright (c) 2005-2017 NVIDIA Corporation</div><div>Built on Fri_Sep__1_21:08:03_CDT_2017</div><div>Cuda compilation tools, release 9.0, V9.0.176</div></div><div><br/></div><ol start="5"><li><div>Install cuDNN</div></li></ol><div>Download at: <a href="https://developer.nvidia.com/rdp/cudnn-download">https://developer.nvidia.com/rdp/cudnn-download</a> (login with gg <a href="mailto:nhan.cao@beesightsoft.com">nhan.cao@beesightsoft.com</a>)</div><div>-&gt; Select cuDNN for CUDA 9.0 -&gt; Download latest cuDNN Runtime Library, cuDNN Developer Library, cuDNN Code Samples and User Guide</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div># Download at <a href="https://developer.nvidia.com/compute/machine-learning/cudnn/secure/v7.4.2/prod/9.0_20181213/Ubuntu16_04-x64/libcudnn7_7.4.2.24-1%2Bcuda9.0_amd64.deb">https://developer.nvidia.com/compute/machine-learning/cudnn/secure/v7.4.2/prod/9.0_20181213/Ubuntu16_04-x64/libcudnn7_7.4.2.24-1%2Bcuda9.0_amd64.deb</a></div><div># <a href="https://developer.nvidia.com/compute/machine-learning/cudnn/secure/v7.4.2/prod/9.0_20181213/Ubuntu16_04-x64/libcudnn7-dev_7.4.2.24-1%2Bcuda9.0_amd64.deb">https://developer.nvidia.com/compute/machine-learning/cudnn/secure/v7.4.2/prod/9.0_20181213/Ubuntu16_04-x64/libcudnn7-dev_7.4.2.24-1%2Bcuda9.0_amd64.deb</a></div><div># <a href="https://developer.nvidia.com/compute/machine-learning/cudnn/secure/v7.4.2/prod/9.0_20181213/Ubuntu16_04-x64/libcudnn7-doc_7.4.2.24-1%2Bcuda9.0_amd64.deb">https://developer.nvidia.com/compute/machine-learning/cudnn/secure/v7.4.2/prod/9.0_20181213/Ubuntu16_04-x64/libcudnn7-doc_7.4.2.24-1%2Bcuda9.0_amd64.deb</a></div><div><br/></div><div># Install</div><div>sudo dpkg -i libcudnn7_7.4.2.24-1+cuda9.0_amd64.deb</div><div>sudo dpkg -i libcudnn7-dev_7.4.2.24-1+cuda9.0_amd64.deb</div><div>sudo dpkg -i libcudnn7-doc_7.4.2.24-1+cuda9.0_amd64.deb</div></div><div><br/></div><div>Test the cuDNN installation.</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div>cp -r /usr/src/cudnn_samples_v7/ ./</div><div>cd cudnn_samples_v7/mnistCUDNN/</div><div><br/></div><div>sudo apt install gcc-6 g++-6</div><div>sudo ln -s /usr/bin/gcc-6 /usr/local/cuda/bin/gcc</div><div>sudo ln -s /usr/bin/g++-6 /usr/local/cuda/bin/g++</div><div>make clean &amp;&amp; make</div><div>./mnistCUDNN</div><div><br/></div><div>==&gt; </div><div>….</div><div>Result of classification: 1 3 5</div><div><br/></div><div>Test passed!</div><div><br/></div><div># Remove sample</div><div>cd ../../</div><div>rm -rf cudnn_samples_v7</div></div><div><br/></div><ol start="6"><li><div>Lock nvidia env version</div></li></ol><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div>sudo apt-mark hold nvidia-driver-390 cuda libcudnn7 libcudnn7-dev libcudnn7-doc</div><div><br/></div><div># To reverse this operation run:</div><div># sudo apt-mark unhold package_name</div></div><div><br/></div><ol start="7"><li><div>To monitor GPU </div></li></ol><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div>watch -n 1 nvidia-smi</div></div><div><br/></div><div># Install Tensorflow GPU</div><div><a href="https://www.tensorflow.org/install/pip">https://www.tensorflow.org/install/pip</a></div><ol><li><div>Active python env</div></li></ol><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div>ml3.active</div></div><div><br/></div><ol start="2"><li><div>Install tensorflow gpu</div></li></ol><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div>pip install --ignore-installed --upgrade tensorflow-gpu</div></div><ol start="3"><li><div>Verify installation</div></li></ol><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div>python -c "import tensorflow as tf; tf.enable_eager_execution(); print(tf.reduce_sum(tf.random_normal([1000, 1000])))"</div></div><div>Error: Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 FMA</div><div>=&gt; Fix: <a href="https://github.com/lakshayg/tensorflow-build">https://github.com/lakshayg/tensorflow-build</a> (FMA, AVX, AVX2, SSE4.1, SSE4.2)</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div>pip install --upgrade https://github.com/lakshayg/tensorflow-build/releases/download/tf1.12.0-ubuntu18.04-py2-py3/tensorflow-1.12.0-cp36-cp36m-linux_x86_64.whl</div></div><div>If in the log, you not see the <span style="color: rgb(255, 31, 0); font-weight: bold;">Adding visible gpu devices: 0</span> message, then GPU installation still not succeed yet.</div><div><br/></div><div><br/></div><div><span style="font-size: 18px; font-weight: bold;">If not solved, try to build from source</span></div><div><br/></div><div>Install pip package dependencies</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div>pip install -U pip six numpy wheel mock</div><div>pip install -U keras_applications==1.0.6 --no-deps</div><div>pip install -U keras_preprocessing==1.0.5 --no-deps</div></div><div>Install Bazel (using version 0.18.1)</div><div><a href="https://docs.bazel.build/versions/master/install-ubuntu.html">https://docs.bazel.build/versions/master/install-ubuntu.html</a></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div>sudo apt-get install pkg-config zip g++ zlib1g-dev unzip python</div><div>wget https://github.com/bazelbuild/bazel/releases/download/0.18.1/bazel-0.18.1-installer-linux-x86_64.sh</div><div>chmod +x bazel-0.18.1-installer-linux-x86_64.sh</div><div>./bazel-0.18.1-installer-linux-x86_64.sh --user</div><div><br/></div><div># Update bash_aliases</div><div>export PATH="$PATH:$HOME/bin"</div><div>export PATH=/usr/local/cuda-9.0/bin${PATH:+:${PATH}}</div><div>export LD_LIBRARY_PATH=/usr/local/cuda-9.0/lib64${LD_LIBRARY_PATH:+:${LD_LIBRARY_PATH}}</div><div>export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/local/cuda/extras/CUPTI/lib64</div></div><div><br/></div><div>Config build tf sources</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div>git clone --recurse-submodules https://github.com/tensorflow/tensorflow.git</div><div>cd tensorflow</div><div>git checkout r1.12</div><div>./configure</div><div><br/></div><div><b># Example config</b></div><div>WARNING: The following rc files are no longer being read, please transfer their contents or import their path into one of the standard rc files:</div><div>/home/nhancao/Workspace/tensorflow/tools/bazel.rc</div><div>WARNING: --batch mode is deprecated. Please instead explicitly shut down your Bazel server using the command "bazel shutdown".</div><div>INFO: Invocation ID: 8d26d707-4d99-4c96-9562-a3c804711812</div><div>You have bazel 0.21.0 installed.</div><div>Please specify the location of python. [Default is /home/nhancao/Workspace/python/ml3/bin/python]:</div><div><br/></div><div><br/></div><div>Traceback (most recent call last):</div><div>  File "&lt;string&gt;", line 1, in &lt;module&gt;</div><div>AttributeError: module 'site' has no attribute 'getsitepackages'</div><div>Found possible Python library paths:</div><div>  /home/nhancao/Workspace/python/ml3/lib/python3.6/site-packages</div><div>Please input the desired Python library path to use.  Default is [/home/nhancao/Workspace/python/ml3/lib/python3.6/site-packages]</div><div><br/></div><div>Do you wish to build TensorFlow with Apache Ignite support? [Y/n]: n</div><div>No Apache Ignite support will be enabled for TensorFlow.</div><div><br/></div><div>Do you wish to build TensorFlow with XLA JIT support? [Y/n]: n</div><div>No XLA JIT support will be enabled for TensorFlow.</div><div><br/></div><div>Do you wish to build TensorFlow with OpenCL SYCL support? [y/N]: n</div><div>No OpenCL SYCL support will be enabled for TensorFlow.</div><div><br/></div><div>Do you wish to build TensorFlow with ROCm support? [y/N]: n</div><div>No ROCm support will be enabled for TensorFlow.</div><div><br/></div><div>Do you wish to build TensorFlow with CUDA support? [y/N]: y</div><div>CUDA support will be enabled for TensorFlow.</div><div><br/></div><div>Please specify the CUDA SDK version you want to use. [Leave empty to default to CUDA 9.0]: 9.0</div><div><br/></div><div><br/></div><div>Please specify the location where CUDA 9.0 toolkit is installed. Refer to README.md for more details. [Default is /usr/local/cuda]:</div><div><br/></div><div><br/></div><div>Please specify the cuDNN version you want to use. [Leave empty to default to cuDNN 7]: 7</div><div><br/></div><div><br/></div><div>Please specify the location where cuDNN 7 library is installed. Refer to README.md for more details. [Default is /usr/local/cuda]:</div><div><br/></div><div><br/></div><div>Do you wish to build TensorFlow with TensorRT support? [y/N]: n</div><div>No TensorRT support will be enabled for TensorFlow.</div><div><br/></div><div>Please specify the NCCL version you want to use. If NCCL 2.2 is not installed, then you can use version 1.3 that can be fetched automatically but it may have worse performance with multiple GPUs. [Default is 2.2]: 1.3</div><div><br/></div><div><br/></div><div>Please specify a list of comma-separated Cuda compute capabilities you want to build with.</div><div>You can find the compute capability of your device at: https://developer.nvidia.com/cuda-gpus.</div><div>Please note that each additional compute capability significantly increases your build time and binary size. [Default is: 3.0]: 3.0</div><div><br/></div><div><br/></div><div>Do you want to use clang as CUDA compiler? [y/N]: n</div><div>nvcc will be used as CUDA compiler.</div><div><br/></div><div>Please specify which gcc should be used by nvcc as the host compiler. [Default is /usr/bin/x86_64-linux-gnu-gcc-6]:</div><div><br/></div><div><br/></div><div>Do you wish to build TensorFlow with MPI support? [y/N]: n</div><div>No MPI support will be enabled for TensorFlow.</div><div><br/></div><div>Please specify optimization flags to use during compilation when bazel option "--config=opt" is specified [Default is -march=native]:</div><div><br/></div><div><br/></div><div>Would you like to interactively configure ./WORKSPACE for Android builds? [y/N]: n</div><div>Not configuring the WORKSPACE for Android builds.</div><div><br/></div><div>Preconfigured Bazel build configs. You can use any of the below by adding "--config=&lt;&gt;" to your build command. See tools/bazel.rc for more details.</div><div>    --config=mkl             # Build with MKL support.</div><div>    --config=monolithic      # Config for mostly static monolithic build.</div><div>    --config=gdr             # Build with GDR support.</div><div>    --config=verbs           # Build with libverbs support.</div><div>    --config=ngraph          # Build with Intel nGraph support.</div><div>Configuration finished</div></div><div>Build</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div># Avoid error with Bazel 0.19: ERROR: Config value cuda is not defined in any .rc file</div><div># Copy content of <b>/home/nhancao/Workspace/tensorflow/tools/bazel.rc</b> and path to the top of hidden file <b>/home/nhancao/Workspace/tensorflow/.tf_configure.bazelrc</b></div><div><br/></div><div># Build GPU</div><div>bazel build --config=opt --config=cuda --cxxopt="-D_GLIBCXX_USE_CXX11_ABI=0" //tensorflow/tools/pip_package:build_pip_package</div><div><br/></div><div>==&gt; </div><div>Target //tensorflow/tools/pip_package:build_pip_package up-to-date:</div><div>  bazel-bin/tensorflow/tools/pip_package/build_pip_package</div><div>INFO: <b>Elapsed time: 4050.552s</b>, Critical Path: 184.23s</div><div>INFO: 9077 processes: 9077 local.</div><div>INFO: Build completed successfully, 11380 total actions</div><div><br/></div></div><div>Build the package</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div>./bazel-bin/tensorflow/tools/pip_package/build_pip_package /tmp/tensorflow_pkg</div></div><div>Install the package</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div>pip install /tmp/tensorflow_pkg/tensorflow-*.whl</div><div><br/></div><div>==&gt; </div><div>Installing collected packages: tensorboard, tensorflow</div><div>  Found existing installation: tensorboard 1.8.0</div><div>    Uninstalling tensorboard-1.8.0:</div><div>      Successfully uninstalled tensorboard-1.8.0</div><div>Successfully installed tensorboard-1.12.1 tensorflow-1.12.0</div></div><div>Verify again</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div>python -c "import tensorflow as tf; tf.enable_eager_execution(); print(tf.reduce_sum(tf.random_normal([1000, 1000])))"</div><div><br/></div><div>==&gt; </div><div>2018-12-27 18:45:19.010132: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:964] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero</div><div>2018-12-27 18:45:19.010732: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1432] Found device 0 with properties:</div><div>name: Quadro K2000 major: 3 minor: 0 memoryClockRate(GHz): 0.954</div><div>pciBusID: 0000:01:00.0</div><div>totalMemory: 1.95GiB freeMemory: 1.64GiB</div><div>2018-12-27 18:45:19.010755: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1511] <b><font style="color: rgb(255, 31, 0);">Adding visible gpu devices: 0</font></b></div><div>2018-12-27 18:45:19.241928: I tensorflow/core/common_runtime/gpu/gpu_device.cc:982] Device interconnect StreamExecutor with strength 1 edge matrix:</div><div>2018-12-27 18:45:19.241960: I tensorflow/core/common_runtime/gpu/gpu_device.cc:988]      0</div><div>2018-12-27 18:45:19.241981: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1001] 0:   N</div><div>2018-12-27 18:45:19.242131: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1115] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 1405 MB memory) -&gt; physical GPU (device: 0, name: Quadro K2000, pci bus id: 0000:01:00.0, compute capability: 3.0)</div><div>tf.Tensor(439.25876, shape=(), dtype=float32)</div></div><div><br/></div><div><br/></div><ol start="4"><li><div>Install python util packages</div></li></ol><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div>pip install numpy scipy matplotlib pandas statsmodels scikit-learn IPython seaborn nltk plotly cufflinks lightgbm yellowbrick ipython jupyter nbconvert</div></div><ol start="5"><li><div>Deactive python env</div></li></ol><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div>deactivate</div></div><div><br/></div><div># Install PyTorch</div><div><a href="https://pytorch.org/">https://pytorch.org/</a></div><ol><li><div>Install torch</div></li></ol><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div>ml3.active</div><div><br/></div><div>pip install torch torchvision</div><div><br/></div><div>deactivate</div></div><ol start="2"><li><div>Verify installation</div></li></ol><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div><div>$ python -c "import torch; torch.cuda.current_device(); print(torch.cuda.device(0)); print(torch.cuda.get_device_name(0))"</div></div></div><div><br/></div><div/><div><span style="color: rgb(105, 170, 53);"><br/></span></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div></body></html>